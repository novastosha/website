<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="author" content="S. S.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="my homepage!">
    <style>
        img {
            image-rendering: pixelated;
        }

        html {
            font-family: Roboto Mono, monospace;
            font-size: 14px;
            line-height: 1.2em;
            height: 100%;
        }

        body {
            max-width: 768px;
            margin: 1em auto;
            color: var(--text-color);
        }

        li {
            list-style-type: square;
            list-style-position: inside;
            margin-top: .25em;
        }

        #navbar {
            display: flex;
            justify-content: space-between;
        }

        #navbar-links b:after {
            content: "|";
            margin: 0 .5rem;
        }

        #navbar-links b:last-child:after {
            content: "";
        }

        :root {
            --text-color: #000000;
            --link-color: #0000ee;
        }

        a,
        a:visited {
            color: var(--link-color);
        }

        a:active,
        a:hover {
            color: #fff;
            background-color: var(--link-color);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text-color: #eeeeee;
                --link-color: #0392da;
            }

            body {
                background: #000;
                color: var(--text-color);
            }

            hr {
                filter: brightness(.3);
            }
        }

        *,
        *:before,
        *:after {
            box-sizing: inherit;
        }

        * {
            padding: 0;
            margin: 0;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        hr {
            font-size: 1em;
            position: relative;
            margin: 1em 0;
        }

        h1:first-child {
            margin-top: 0;
        }

        h1:after {
            content: "=================================================";
            position: absolute;
            left: 0;
            top: 1em;
        }

        h1 {
            padding-bottom: 1em;
            overflow-x: hidden;
        }

        h2:before {
            content: "### ";
        }
    </style>
    <title>Redirecting...</title>
    <script>
        const destMap = {
            // "name": ["display name", "encoded URL", display in body]
            "default": ['bXkgaG9tZXBhZ2U=', 'aHR0cHM6Ly9zYWplZC5kZXY=', true],
            "pintrest": ['bXkgcGludHJlc3Q=', 'aHR0cHM6Ly91ay5waW50ZXJlc3QuY29tL3NsaW1hbmlfc2FqZWQv', true],
        };

        function getParams() {
            const params = {};
            const queryString = window.location.search.slice(1);
            for (const pair of queryString.split('&')) {
                if (!pair) continue;
                const [key, value] = pair.split('=').map(decodeURIComponent);
                params[key] = value;
            }
            return params;
        }

        function getDestUrl() {
            const params = getParams();
            const destKey = params.dest || params.to || params.d || "none";
            return destMap[destKey] || (destKey == "none" ? undefined : destMap["default"]);
        }

        function performRedirect() {
            const destUrl = getDestUrl();
            if (!destUrl) return; // Display all possible destinations in the body if no destination is set.
            console.log("Redirecting to:", destUrl);

            const url = atob(destUrl[1]);
            window.location.href = url;
        }

        window.onload = performRedirect;

        document.addEventListener("DOMContentLoaded", function() {
            const link = document.getElementById("manual-redirect-link");
            const dUrl = getDestUrl();
            if (link && dUrl) {
                link.href = atob(dUrl[1]);
            }

            if (!dUrl) {
                document.getElementById("redirect-message").remove();

                const contentDiv = document.getElementById("content");
                contentDiv.style.display = "block";
                const ul = document.getElementById("possible-destinations");
                for (const key in destMap) {
                    if (destMap.hasOwnProperty(key)) {
                        const li = document.createElement("li");
                        
                        const displayName = atob(destMap[key][0]);
                        const encodedUrl = atob(destMap[key][1]);
                        const shouldDisplay = destMap[key][2];
                        if (!shouldDisplay) continue;
                        li.innerHTML = `<b>${displayName}:</b> <a href="${encodedUrl}">${encodedUrl}</a>`;
                        li.style.display = "list-item";
                    
                        ul.appendChild(li);
                    }
                }
            }
        });
    </script>
</head>

<body>
    <p id="redirect-message">Redirecting... If you are not redirected, please enable Javascript in your browser settings or try <a id="manual-redirect-link" href="#">clicking here</a></p>

    <div id="content" style="display:none;">
        <h1>my other links: </h1>
        <ul id="possible-destinations"></ul>
    </div>
</body>
</html>